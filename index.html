<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowMaster Pro V4 - Strict Flow</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .hidden {
            display: none !important;
        }

        .intro-title {
            font-size: 32px;
            font-weight: 800;
            color: #1a1a1a;
            margin-bottom: 10px;
            text-align: center;
        }

        .intro-subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
            text-align: center;
        }

        .cta-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin: 20px 0;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            transform: translateY(-2px);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
        }

        .form-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 16px;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .nav-button {
            flex: 1;
            padding: 12px 24px;
            border: 2px solid #ddd;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-button:disabled {
            background: #f0f0f0 !important;
            color: #ccc !important;
            cursor: not-allowed !important;
            border-color: #e0e0e0 !important;
        }

        .nav-button:hover:not(:disabled) {
            border-color: #667eea;
        }

        .nav-button.primary {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .nav-button.primary:hover:not(:disabled) {
            background: #5a6fd8;
        }

        .nav-button.primary:disabled {
            background: #ccc !important;
            border-color: #ccc !important;
        }

        .sector-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .sector-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .sector-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .sector-card.selected {
            border-color: #667eea;
            background: #eff6ff;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
        }

        .sector-icon {
            font-size: 40px;
            margin-bottom: 15px;
        }

        .sector-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .sector-description {
            font-size: 14px;
            color: #666;
        }

        .progress-bar {
            background: #f1f5f9;
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
        }

        .progress-fill {
            background: linear-gradient(90deg, #667eea, #764ba2);
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-top: 10px;
        }

        .success-state {
            text-align: center;
        }

        .success-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .success-title {
            font-size: 28px;
            font-weight: 700;
            color: #22c55e;
            margin-bottom: 15px;
        }

        .success-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .download-button {
            background: #22c55e;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 12px;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .download-button:hover {
            background: #16a34a;
            transform: translateY(-2px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: #f8fafc;
            border-radius: 16px;
        }

        .stat-number {
            display: block;
            font-size: 24px;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        /* Assessment Styling */
        .assessment-options {
            display: grid;
            gap: 15px;
            margin: 30px 0;
        }

        .assessment-option {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 15px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .assessment-option:hover {
            border-color: #667eea;
            background: #eff6ff;
        }

        .assessment-option.selected {
            border-color: #667eea;
            background: #eff6ff;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);
        }

        .assessment-option-text {
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }

        /* Privacy Checkbox Styling */
        .privacy-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            font-size: 14px;
            line-height: 1.5;
            color: #555;
            cursor: pointer;
            margin-top: 10px;
        }

        .privacy-checkbox input[type="checkbox"] {
            display: none;
        }

        .privacy-checkbox .checkmark {
            flex-shrink: 0;
            width: 20px;
            height: 20px;
            border: 2px solid #ddd;
            border-radius: 4px;
            background: white;
            position: relative;
            transition: all 0.3s ease;
        }

        .privacy-checkbox input[type="checkbox"]:checked + .checkmark {
            background: #667eea;
            border-color: #667eea;
        }

        .privacy-checkbox input[type="checkbox"]:checked + .checkmark::after {
            content: "✓";
            position: absolute;
            top: -2px;
            left: 3px;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        .privacy-checkbox a {
            color: #667eea;
            text-decoration: none;
        }

        .privacy-checkbox a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        <div class="progress-text" id="progressText">Stap 1 van 5</div>

        <!-- Step 1: Welcome -->
        <div class="card" id="step1">
            <h1 class="intro-title">FlowMaster Pro V4</h1>
            <p class="intro-subtitle">Advanced Recruitment Intelligence Platform</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number">29</span>
                    <span class="stat-label">Expert Vragen</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">2.5K+</span>
                    <span class="stat-label">Bedrijven Getest</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">7min</span>
                    <span class="stat-label">Complete Analyse</span>
                </div>
            </div>

            <button class="cta-button" onclick="nextStep()">Start Complete Assessment 🚀</button>
        </div>

        <!-- Step 2: Company Info -->
        <div class="card hidden" id="step2">
            <h2 class="intro-title">Vertel Ons Over Je Organisatie</h2>
            <p class="intro-subtitle">Deze informatie helpt ons de perfecte analyse voor jou te bepalen</p>
            
            <div class="form-group">
                <label class="form-label">Bedrijfsnaam</label>
                <input type="text" class="form-input" id="companyName" placeholder="Jouw bedrijfsnaam" onkeyup="checkStep2()" required minlength="2" maxlength="100">
            </div>
            
            <div class="form-group">
                <label class="form-label">Contactpersoon</label>
                <input type="text" class="form-input" id="contactName" placeholder="Voor- en achternaam" onkeyup="checkStep2()" required minlength="2" maxlength="100">
            </div>
            
            <div class="form-group">
                <label class="form-label">Mobiele telefoon *</label>
                <input type="tel" class="form-input" id="mobilePhone" placeholder="+31 6 12345678" onkeyup="checkStep2()" required>
            </div>
            
            <div class="form-group">
                <label class="privacy-checkbox">
                    <input type="checkbox" id="privacyCheckbox" onchange="checkStep2()" required>
                    <span class="checkmark"></span>
                    Ik ga akkoord met de <a href="#" target="_blank">privacy voorwaarden</a> en het gebruik van mijn gegevens voor deze assessment.
                </label>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step2Next" disabled>Volgende</button>
            </div>
        </div>

        <!-- Step 3: Company Size -->
        <div class="card hidden" id="step3">
            <h2 class="intro-title">Wat Is Jullie Bedrijfsgrootte?</h2>
            <p class="intro-subtitle">Dit helpt ons om gerichte aanbevelingen te doen</p>
            
            <div class="sector-grid">
                <div class="sector-card" onclick="selectSize('1-10', this)">
                    <div class="sector-icon">🚀</div>
                    <div class="sector-title">Startup</div>
                    <div class="sector-description">1-10 medewerkers</div>
                </div>
                <div class="sector-card" onclick="selectSize('11-50', this)">
                    <div class="sector-icon">📈</div>
                    <div class="sector-title">Scale-up</div>
                    <div class="sector-description">11-50 medewerkers</div>
                </div>
                <div class="sector-card" onclick="selectSize('51-200', this)">
                    <div class="sector-icon">🏢</div>
                    <div class="sector-title">Middelgroot</div>
                    <div class="sector-description">51-200 medewerkers</div>
                </div>
                <div class="sector-card" onclick="selectSize('200+', this)">
                    <div class="sector-icon">🏛️</div>
                    <div class="sector-title">Enterprise</div>
                    <div class="sector-description">200+ medewerkers</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step3Next" disabled>Volgende Stap</button>
            </div>
        </div>

        <!-- Step 4: Sector Selection -->
        <div class="card hidden" id="step4">
            <h2 class="intro-title">Kies Je Specifieke Sector</h2>
            <p class="intro-subtitle">Kies de specifieke industrie sector die het beste bij je organisatie past</p>
            
            <div class="sector-grid">
                <div class="sector-card" onclick="selectSector('Bouw & Constructie', this)">
                    <div class="sector-icon">🏗️</div>
                    <div class="sector-title">Bouw & Constructie</div>
                </div>
                <div class="sector-card" onclick="selectSector('Installatietechniek (W/E/Klimaat)', this)">
                    <div class="sector-icon">🔧</div>
                    <div class="sector-title">Installatietechniek</div>
                    <div class="sector-description">(W/E/Klimaat)</div>
                </div>
                <div class="sector-card" onclick="selectSector('Metaalbewerking & Industrie', this)">
                    <div class="sector-icon">⚙️</div>
                    <div class="sector-title">Metaalbewerking & Industrie</div>
                </div>
                <div class="sector-card" onclick="selectSector('Machinebouw & Equipment', this)">
                    <div class="sector-icon">🏭</div>
                    <div class="sector-title">Machinebouw & Equipment</div>
                </div>
                <div class="sector-card" onclick="selectSector('High-tech & Elektronica', this)">
                    <div class="sector-icon">💻</div>
                    <div class="sector-title">High-tech & Elektronica</div>
                </div>
                <div class="sector-card" onclick="selectSector('Andere technische sector', this)">
                    <div class="sector-icon">⚡</div>
                    <div class="sector-title">Andere technische sector</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step4Next" disabled>Start 29-Vragen Assessment</button>
            </div>
        </div>

        <!-- Step 5: Assessment Questions -->
        <div class="card hidden" id="step5">
            <div id="assessmentHeader">
                <h2 class="intro-title">Recruitment Maturity Assessment</h2>
                <p class="intro-subtitle">Vraag <span id="questionNumber">1</span> van 19</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="assessmentProgress" style="width: 6.67%"></div>
                </div>
            </div>
            
            <div id="questionContainer">
                <h3 id="questionText" style="font-size: 20px; margin-bottom: 30px; line-height: 1.4;"></h3>
                
                <div id="optionsContainer" class="assessment-options">
                    <!-- Options will be dynamically generated -->
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()" id="assessmentPrevious">Vorige</button>
                <button class="nav-button primary" onclick="nextAssessmentQuestion()" id="assessmentNext" disabled>Volgende Vraag</button>
            </div>
        </div>

        <!-- Step 6: Success Page -->
        <div class="card hidden" id="step6">
            <div class="success-state">
                <div class="success-icon">🎉</div>
                <h2 class="success-title">Perfect! Je Complete Assessment is Voltooid</h2>
                <p class="success-message">
                    Bedankt <span id="finalName">Gebruiker</span>! Je assessment score van <strong>85%</strong> met sector expertise is opgeslagen. 
                    We nemen binnen 24 uur contact met je op voor jouw persoonlijke strategie sessie.
                    <br><br>
                    Check je email voor alle details en een exclusieve voorbereidingshandleiding.
                </p>
                
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
                    <button class="download-button" onclick="downloadReport()">
                        📄 Download Je Rapport
                    </button>
                    <button class="cta-button" onclick="restart()">
                        🔄 Start Nieuwe Assessment
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let formData = {
            companyName: '',
            contactName: '',
            mobilePhone: '',
            companySize: '',
            sector: '',
            privacyAccepted: false,
            totalScore: 0,
            answers: {},
            currentQuestion: 1
        };

        // Original 19 Assessment Questions in Simple Dutch
        const assessmentQuestions = [
            {
                id: 1,
                question: "Hoe vaak evalueert jullie organisatie het recruitment proces?",
                options: [
                    { text: "Nooit", points: 0 },
                    { text: "Jaarlijks", points: 3 },
                    { text: "Per kwartaal", points: 7 },
                    { text: "Maandelijks", points: 10 }
                ]
            },
            {
                id: 2,
                question: "Beschikt jullie organisatie over een gestructureerd onboarding programma?",
                options: [
                    { text: "Geen onboarding", points: 0 },
                    { text: "Basis introductie", points: 3 },
                    { text: "Gestructureerd programma", points: 7 },
                    { text: "Volledig gepersonaliseerd", points: 10 }
                ]
            },
            {
                id: 3,
                question: "Hoe meet jullie organisatie de effectiviteit van recruitment?",
                options: [
                    { text: "Helemaal niet", points: 0 },
                    { text: "Basis statistieken", points: 3 },
                    { text: "KPI dashboard", points: 7 },
                    { text: "Advanced analytics", points: 10 }
                ]
            },
            {
                id: 4,
                question: "Welke moderne recruitment tools gebruikt jullie organisatie?",
                options: [
                    { text: "Alleen traditionele methoden", points: 0 },
                    { text: "Basis job boards", points: 3 },
                    { text: "ATS systeem", points: 7 },
                    { text: "AI-powered recruitment suite", points: 10 }
                ]
            },
            {
                id: 5,
                question: "Hoe is de samenwerking tussen HR en hiring managers?",
                options: [
                    { text: "Minimale communicatie", points: 0 },
                    { text: "Ad-hoc contact", points: 3 },
                    { text: "Reguliere meetings", points: 7 },
                    { text: "Strategische partnership", points: 10 }
                ]
            },
            {
                id: 6,
                question: "Hoe lang duurt jullie gemiddelde recruitment proces?",
                options: [
                    { text: "Meer dan 3 maanden", points: 0 },
                    { text: "2-3 maanden", points: 3 },
                    { text: "1-2 maanden", points: 7 },
                    { text: "Minder dan 1 maand", points: 10 }
                ]
            },
            {
                id: 7,
                question: "Heeft jullie organisatie een duidelijke employer branding strategie?",
                options: [
                    { text: "Geen strategie", points: 0 },
                    { text: "Basis company profile", points: 3 },
                    { text: "Actieve employer branding", points: 7 },
                    { text: "Award-winning employer brand", points: 10 }
                ]
            },
            {
                id: 8,
                question: "Hoe goed zijn jullie recruitment processen gedocumenteerd?",
                options: [
                    { text: "Niet gedocumenteerd", points: 0 },
                    { text: "Basis procedures", points: 3 },
                    { text: "Gedetailleerde handleidingen", points: 7 },
                    { text: "Volledig geautomatiseerd", points: 10 }
                ]
            },
            {
                id: 9,
                question: "Welk percentage van jullie vacatures wordt intern vervuld?",
                options: [
                    { text: "0-10%", points: 0 },
                    { text: "10-25%", points: 3 },
                    { text: "25-40%", points: 7 },
                    { text: "40%+", points: 10 }
                ]
            },
            {
                id: 10,
                question: "Hoe vaak trainen jullie hiring managers in interview technieken?",
                options: [
                    { text: "Nooit", points: 0 },
                    { text: "Bij aanstelling", points: 3 },
                    { text: "Jaarlijks", points: 7 },
                    { text: "Voortdurende ontwikkeling", points: 10 }
                ]
            },
            {
                id: 11,
                question: "Gebruikt jullie organisatie data-driven recruitment decisions?",
                options: [
                    { text: "Alleen op gevoel", points: 0 },
                    { text: "Basis rapportage", points: 3 },
                    { text: "Data-informed beslissingen", points: 7 },
                    { text: "Volledig data-driven", points: 10 }
                ]
            },
            {
                id: 12,
                question: "Hoe proactief is jullie talent acquisition strategie?",
                options: [
                    { text: "Alleen reactief", points: 0 },
                    { text: "Occasioneel proactief", points: 3 },
                    { text: "Strategisch proactief", points: 7 },
                    { text: "Continue talent pipeline", points: 10 }
                ]
            },
            {
                id: 13,
                question: "Welke diversiteit & inclusie maatregelen zijn er in recruitment?",
                options: [
                    { text: "Geen specifieke maatregelen", points: 0 },
                    { text: "Basis awareness", points: 3 },
                    { text: "Actieve D&I strategie", points: 7 },
                    { text: "Geavanceerde D&I programma's", points: 10 }
                ]
            },
            {
                id: 14,
                question: "Hoe snel kunnen jullie reageren op urgente recruitment behoeften?",
                options: [
                    { text: "Weken tot maanden", points: 0 },
                    { text: "1-2 weken", points: 3 },
                    { text: "Binnen een week", points: 7 },
                    { text: "Binnen 24-48 uur", points: 10 }
                ]
            },
            {
                id: 15,
                question: "Hoe goed is de candidate experience in jullie proces?",
                options: [
                    { text: "Geen focus op experience", points: 0 },
                    { text: "Basis communicatie", points: 3 },
                    { text: "Gestructureerde experience", points: 7 },
                    { text: "Premium candidate journey", points: 10 }
                ]
            },
            {
                id: 16,
                question: "Welke recruitment marketing strategieën gebruikt jullie organisatie?",
                options: [
                    { text: "Geen specifieke marketing", points: 0 },
                    { text: "Basic job postings", points: 3 },
                    { text: "Multi-channel approach", points: 7 },
                    { text: "Geavanceerde recruitment marketing", points: 10 }
                ]
            },
            {
                id: 17,
                question: "Hoe effectief is jullie employee referral programma?",
                options: [
                    { text: "Geen referral programma", points: 0 },
                    { text: "Informeel referral systeem", points: 3 },
                    { text: "Gestructureerd referral programma", points: 7 },
                    { text: "High-performance referral systeem", points: 10 }
                ]
            },
            {
                id: 18,
                question: "Hoe goed wordt de cultural fit geëvalueerd tijdens recruitment?",
                options: [
                    { text: "Geen culture fit evaluatie", points: 0 },
                    { text: "Basis gesprek over waarden", points: 3 },
                    { text: "Gestructureerde culture fit assessment", points: 7 },
                    { text: "Geavanceerde culture matching", points: 10 }
                ]
            },
            {
                id: 19,
                question: "Welke technologie wordt gebruikt voor candidate screening?",
                options: [
                    { text: "Handmatige screening", points: 0 },
                    { text: "Basic filtering tools", points: 3 },
                    { text: "Automated screening software", points: 7 },
                    { text: "AI-powered screening platform", points: 10 }
                ]
            },
            {
                id: 20,
                question: "Hoe wordt feedback verzameld van kandidaten na het proces?",
                options: [
                    { text: "Geen feedback verzameling", points: 0 },
                    { text: "Occasionele feedback vragen", points: 3 },
                    { text: "Systematische feedback surveys", points: 7 },
                    { text: "Real-time feedback en analytics", points: 10 }
                ]
            },
            {
                id: 21,
                question: "Hoe effectief is de talent pool management?",
                options: [
                    { text: "Geen talent pool", points: 0 },
                    { text: "Basic contact database", points: 3 },
                    { text: "Georganiseerde talent pool", points: 7 },
                    { text: "Dynamic talent community", points: 10 }
                ]
            },
            {
                id: 22,
                question: "Welke assessment methoden worden gebruikt voor skills evaluatie?",
                options: [
                    { text: "Alleen interview gesprekken", points: 0 },
                    { text: "Basic skills vragen", points: 3 },
                    { text: "Gestructureerde competentie tests", points: 7 },
                    { text: "Geavanceerde assessment center", points: 10 }
                ]
            },
            {
                id: 23,
                question: "Hoe wordt de recruitment ROI gemeten en geoptimaliseerd?",
                options: [
                    { text: "Geen ROI tracking", points: 0 },
                    { text: "Basic cost-per-hire", points: 3 },
                    { text: "Uitgebreide ROI analytics", points: 7 },
                    { text: "Predictive ROI optimization", points: 10 }
                ]
            },
            {
                id: 24,
                question: "Hoe goed is de communicatie met kandidaten tijdens het proces?",
                options: [
                    { text: "Minimale communicatie", points: 0 },
                    { text: "Standard status updates", points: 3 },
                    { text: "Proactieve communicatie", points: 7 },
                    { text: "Personalized candidate journey", points: 10 }
                ]
            },
            {
                id: 25,
                question: "Welke social media strategieën worden gebruikt voor recruitment?",
                options: [
                    { text: "Geen social media gebruik", points: 0 },
                    { text: "Basic LinkedIn posting", points: 3 },
                    { text: "Multi-platform social recruiting", points: 7 },
                    { text: "Advanced social media recruitment", points: 10 }
                ]
            },
            {
                id: 26,
                question: "Hoe effectief is de salary benchmarking en compensation strategy?",
                options: [
                    { text: "Geen benchmarking", points: 0 },
                    { text: "Basis markt onderzoek", points: 3 },
                    { text: "Regelmatige benchmarking", points: 7 },
                    { text: "Dynamic compensation intelligence", points: 10 }
                ]
            },
            {
                id: 27,
                question: "Welke video interviewing en remote assessment tools worden gebruikt?",
                options: [
                    { text: "Alleen face-to-face interviews", points: 0 },
                    { text: "Basic video calling", points: 3 },
                    { text: "Professionele video interview platform", points: 7 },
                    { text: "AI-enhanced video assessment", points: 10 }
                ]
            },
            {
                id: 28,
                question: "Hoe goed wordt er samengewerkt met external recruitment partners?",
                options: [
                    { text: "Geen externe partners", points: 0 },
                    { text: "Ad-hoc recruitment bureaus", points: 3 },
                    { text: "Strategische partnerships", points: 7 },
                    { text: "Integrated recruitment ecosystem", points: 10 }
                ]
            },
            {
                id: 29,
                question: "Welke continuous improvement processen zijn er voor recruitment?",
                options: [
                    { text: "Geen improvement proces", points: 0 },
                    { text: "Jaarlijkse review", points: 3 },
                    { text: "Kwartaal optimalisaties", points: 7 },
                    { text: "Continuous optimization cycle", points: 10 }
                ]
            }
        ];

        // STRICT FLOW CONTROL - NO SKIPPING ALLOWED
        function nextStep() {
            console.log('🔒 nextStep() called from step:', currentStep);
            console.trace('Call stack:'); // This will show us exactly what called nextStep()
            
            // Step 1 to 2: Always allowed
            if (currentStep === 1) {
                goToStep(2);
                return;
            }
            
            // Step 2 to 3: Check if company info is complete
            if (currentStep === 2) {
                if (!isStep2Complete()) {
                    alert('⚠️ Vul eerst je bedrijfsnaam en contactgegevens in!');
                    return;
                }
                goToStep(3);
                return;
            }
            
            // Step 3 to 4: Check if company size is selected
            if (currentStep === 3) {
                if (!formData.companySize) {
                    alert('⚠️ Selecteer eerst je bedrijfsgrootte!');
                    return;
                }
                goToStep(4);
                return;
            }
            
            // Step 4 to 5: Check if sector is selected
            if (currentStep === 4) {
                if (!formData.sector) {
                    alert('⚠️ Selecteer eerst je specifieke sector!');
                    return;
                }
                goToStep(5);
                return;
            }
            
            // Step 5 to 6: Complete assessment first
            if (currentStep === 5) {
                console.log('⚠️ Cannot skip assessment - complete all questions first');
                alert('⚠️ Voltooi eerst alle assessment vragen!');
                return;
            }
            
            console.error('❌ Invalid step progression attempt');
        }

        function previousStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }

        function goToStep(step) {
            console.log('✅ Going to step:', step);
            
            try {
                // Hide all steps
                document.querySelectorAll('.card').forEach(card => {
                    card.classList.add('hidden');
                });
                
                // Show target step
                const targetStep = document.getElementById('step' + step);
                if (targetStep) {
                    targetStep.classList.remove('hidden');
                    currentStep = step;
                    updateProgress();
                    
                    // Initialize assessment when going to step 5
                    if (step === 5) {
                        initializeAssessment();
                    }
                    
                    // Update final name if going to step 6
                    if (step === 6) {
                        const name = formData.contactName || 'Gebruiker';
                        const finalNameEl = document.getElementById('finalName');
                        if (finalNameEl) {
                            finalNameEl.textContent = name;
                        }
                        
                        // Hide progress bar on final step
                        const progressBar = document.getElementById('progressBar');
                        const progressText = document.getElementById('progressText');
                        if (progressBar) progressBar.style.display = 'none';
                        if (progressText) progressText.style.display = 'none';
                    } else {
                        // Show progress bar on other steps
                        const progressBar = document.getElementById('progressBar');
                        const progressText = document.getElementById('progressText');
                        if (progressBar) progressBar.style.display = 'block';
                        if (progressText) progressText.style.display = 'block';
                    }
                } else {
                    console.error('❌ Step element not found:', 'step' + step);
                }
            } catch (error) {
                console.error('Error in goToStep:', error);
            }
        }

        function updateProgress() {
            try {
                const progress = ((currentStep - 1) / 5) * 100;
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                
                if (progressFill) {
                    progressFill.style.width = Math.max(0, Math.min(100, progress)) + '%';
                }
                
                if (progressText) {
                    progressText.textContent = `Stap ${currentStep} van 6`;
                }
            } catch (error) {
                console.error('Error in updateProgress:', error);
            }
        }

        function isStep2Complete() {
            const companyName = (document.getElementById('companyName').value || '').trim();
            const contactName = (document.getElementById('contactName').value || '').trim();
            const mobilePhone = (document.getElementById('mobilePhone').value || '').trim();
            const privacyAccepted = document.getElementById('privacyCheckbox').checked;
            
            return companyName.length >= 2 && 
                   contactName.length >= 2 && 
                   mobilePhone.length >= 8 && 
                   privacyAccepted;
        }

        function checkStep2() {
            try {
                const button = document.getElementById('step2Next');
                if (!button) return;
                
                if (isStep2Complete()) {
                    button.disabled = false;
                    formData.companyName = document.getElementById('companyName').value.trim();
                    formData.contactName = document.getElementById('contactName').value.trim();
                    formData.mobilePhone = document.getElementById('mobilePhone').value.trim();
                    formData.privacyAccepted = document.getElementById('privacyCheckbox').checked;
                    console.log('✅ Step 2 validation passed');
                } else {
                    button.disabled = true;
                    console.log('⚠️ Step 2 validation failed');
                }
            } catch (error) {
                console.error('Error in checkStep2:', error);
            }
        }

        function selectSize(size, element) {
            console.log('✅ Selected size:', size);
            formData.companySize = size;
            
            try {
                // Update visual selection
                document.querySelectorAll('.sector-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                if (element) {
                    element.classList.add('selected');
                }
                
                // Enable next button
                const nextButton = document.getElementById('step3Next');
                if (nextButton) {
                    nextButton.disabled = false;
                    console.log('✅ Step 3 validation passed');
                }
            } catch (error) {
                console.error('Error in selectSize:', error);
            }
        }

        function selectSector(sector, element) {
            console.log('✅ Selected sector:', sector);
            formData.sector = sector;
            
            try {
                // Update visual selection - reset all sector cards
                document.querySelectorAll('.sector-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                if (element) {
                    element.classList.add('selected');
                }
                
                // Enable next button
                const nextButton = document.getElementById('step4Next');
                if (nextButton) {
                    nextButton.disabled = false;
                    console.log('✅ Step 4 validation passed');
                }
            } catch (error) {
                console.error('Error in selectSector:', error);
            }
        }

        function downloadReport() {
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const companyName = formData.companyName || 'Test Bedrijf';
                const contactName = formData.contactName || 'Test Gebruiker';
                const mobilePhone = formData.mobilePhone || 'Niet opgegeven';
                const companySize = formData.companySize || 'Niet geselecteerd';
                
                // Header
                doc.setFontSize(20);
                doc.setTextColor(102, 126, 234);
                doc.text('FlowMaster Pro V4 Assessment Rapport', 20, 30);
                
                // Company info
                doc.setFontSize(14);
                doc.setTextColor(0, 0, 0);
                doc.text('Bedrijfsinformatie:', 20, 50);
                doc.setFontSize(12);
                doc.text(`Bedrijf: ${companyName}`, 20, 65);
                doc.text(`Contactpersoon: ${contactName}`, 20, 75);
                doc.text(`Telefoon: ${mobilePhone}`, 20, 85);
                doc.text(`Bedrijfsgrootte: ${companySize}`, 20, 95);
                
                // Score
                doc.setFontSize(16);
                doc.setTextColor(102, 126, 234);
                doc.text('Assessment Resultaat:', 20, 115);
                
                doc.setFontSize(24);
                doc.setTextColor(34, 197, 94);
                doc.text(`${formData.totalScore}%`, 20, 135);
                
                // Grade
                let gradeText = '';
                if (formData.totalScore >= 85) gradeText = 'A+ (Excellent)';
                else if (formData.totalScore >= 75) gradeText = 'A (Very Good)';
                else if (formData.totalScore >= 65) gradeText = 'B+ (Good)';
                else if (formData.totalScore >= 55) gradeText = 'B (Above Average)';
                else if (formData.totalScore >= 45) gradeText = 'C+ (Average)';
                else if (formData.totalScore >= 35) gradeText = 'C (Below Average)';
                else gradeText = 'D (Needs Improvement)';
                
                doc.setFontSize(14);
                doc.setTextColor(0, 0, 0);
                doc.text(`Grade: ${gradeText}`, 20, 150);
                
                // Assessment details
                doc.setFontSize(12);
                doc.text('Dit rapport bevat een analyse van uw recruitment maturity gebaseerd op 29 vragen', 20, 170);
                doc.text('over moderne recruitment praktijken, tools en processen.', 20, 180);
                
                // Contact info
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text('Voor vragen over dit rapport, neem contact op via FlowMaster Pro.', 20, 250);
                doc.text(`Gegenereerd op: ${new Date().toLocaleDateString('nl-NL')}`, 20, 260);
                
                // Download the PDF
                doc.save(`FlowMaster-Assessment-${companyName.replace(/[^a-z0-9]/gi, '_')}.pdf`);
                
                console.log('✅ PDF generated and downloaded successfully');
            } catch (error) {
                console.error('Error generating PDF:', error);
                // Fallback alert
                alert(`📄 PDF Rapport Download!\n\n✅ Assessment Voltooid!\n\nRapport details:\n• Bedrijf: ${formData.companyName}\n• Contact: ${formData.contactName}\n• Telefoon: ${formData.mobilePhone}\n• Score: ${formData.totalScore}%\n• Grootte: ${formData.companySize}`);
            }
        }

        function restart() {
            formData = {
                companyName: '',
                contactName: '',
                mobilePhone: '',
                companySize: '',
                privacyAccepted: false,
                totalScore: 0,
                answers: {},
                currentQuestion: 1
            };
            
            // Reset form fields
            const companyNameEl = document.getElementById('companyName');
            const contactNameEl = document.getElementById('contactName');
            const mobilePhoneEl = document.getElementById('mobilePhone');
            const privacyCheckboxEl = document.getElementById('privacyCheckbox');
            
            if (companyNameEl) companyNameEl.value = '';
            if (contactNameEl) contactNameEl.value = '';
            if (mobilePhoneEl) mobilePhoneEl.value = '';
            if (privacyCheckboxEl) privacyCheckboxEl.checked = false;
            
            // Reset buttons
            const step2NextEl = document.getElementById('step2Next');
            const step3NextEl = document.getElementById('step3Next');
            const assessmentNextEl = document.getElementById('assessmentNext');
            if (step2NextEl) step2NextEl.disabled = true;
            if (step3NextEl) step3NextEl.disabled = true;
            if (assessmentNextEl) {
                assessmentNextEl.disabled = true;
                assessmentNextEl.textContent = 'Volgende Vraag';
            }
            
            // Reset visual selections
            document.querySelectorAll('.sector-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('.assessment-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            goToStep(1);
        }

        // Assessment Functions
        function initializeAssessment() {
            console.log('🎯 Initializing assessment');
            formData.currentQuestion = 1;
            formData.answers = {};
            formData.totalScore = 0;
            displayCurrentQuestion();
        }

        function displayCurrentQuestion() {
            const questionData = assessmentQuestions[formData.currentQuestion - 1];
            if (!questionData) return;

            // Update question number and progress
            const questionNumberEl = document.getElementById('questionNumber');
            const assessmentProgressEl = document.getElementById('assessmentProgress');
            const questionTextEl = document.getElementById('questionText');
            const optionsContainerEl = document.getElementById('optionsContainer');

            if (questionNumberEl) questionNumberEl.textContent = formData.currentQuestion;
            if (assessmentProgressEl) {
                const progress = (formData.currentQuestion / assessmentQuestions.length) * 100;
                assessmentProgressEl.style.width = progress + '%';
            }
            if (questionTextEl) questionTextEl.textContent = questionData.question;

            // Generate options
            if (optionsContainerEl) {
                optionsContainerEl.innerHTML = '';
                questionData.options.forEach((option, index) => {
                    const optionEl = document.createElement('div');
                    optionEl.className = 'assessment-option';
                    optionEl.onclick = () => selectAssessmentOption(formData.currentQuestion, option.points, optionEl);
                    
                    const optionTextEl = document.createElement('div');
                    optionTextEl.className = 'assessment-option-text';
                    optionTextEl.textContent = option.text;
                    
                    optionEl.appendChild(optionTextEl);
                    optionsContainerEl.appendChild(optionEl);
                });
            }

            // Update button state
            const nextButton = document.getElementById('assessmentNext');
            if (nextButton) {
                nextButton.disabled = true;
                if (formData.currentQuestion === assessmentQuestions.length) {
                    nextButton.textContent = 'Ga naar Resultaten';
                } else {
                    nextButton.textContent = 'Volgende Vraag';
                }
            }
        }

        function selectAssessmentOption(questionId, points, selectedElement) {
            console.log('✅ Selected option for question', questionId, 'worth', points, 'points');
            
            // Remove previous selection
            document.querySelectorAll('.assessment-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Mark current selection
            selectedElement.classList.add('selected');
            
            // Store answer
            formData.answers[questionId] = points;
            
            // Enable next button
            const nextButton = document.getElementById('assessmentNext');
            if (nextButton) {
                nextButton.disabled = false;
            }
        }

        function nextAssessmentQuestion() {
            if (!formData.answers[formData.currentQuestion]) {
                alert('⚠️ Selecteer eerst een antwoord!');
                return;
            }

            if (formData.currentQuestion === assessmentQuestions.length) {
                // Assessment complete - calculate score and go to results
                calculateFinalScore();
                goToStep(6);
            } else {
                // Next question
                formData.currentQuestion++;
                displayCurrentQuestion();
            }
        }

        function calculateFinalScore() {
            let totalScore = 0;
            let maxPossibleScore = assessmentQuestions.length * 10; // Max 10 points per question
            
            Object.values(formData.answers).forEach(points => {
                totalScore += points;
            });
            
            // Calculate percentage
            formData.totalScore = Math.round((totalScore / maxPossibleScore) * 100);
            
            console.log('🎯 Assessment completed!');
            console.log('Total points:', totalScore, '/', maxPossibleScore);
            console.log('Final score:', formData.totalScore + '%');
            
            // Update the final score display
            updateFinalScoreDisplay();
        }

        function updateFinalScoreDisplay() {
            // Update the success message with the actual score
            const successMessage = document.querySelector('.success-message');
            if (successMessage) {
                const name = formData.contactName || 'Gebruiker';
                let gradeText = '';
                
                if (formData.totalScore >= 85) gradeText = 'A+ (Excellent)';
                else if (formData.totalScore >= 75) gradeText = 'A (Very Good)';
                else if (formData.totalScore >= 65) gradeText = 'B+ (Good)';
                else if (formData.totalScore >= 55) gradeText = 'B (Above Average)';
                else if (formData.totalScore >= 45) gradeText = 'C+ (Average)';
                else if (formData.totalScore >= 35) gradeText = 'C (Below Average)';
                else gradeText = 'D (Needs Improvement)';
                
                successMessage.innerHTML = `
                    Bedankt ${name}! Je assessment score van <strong>${formData.totalScore}% - ${gradeText}</strong> is opgeslagen. 
                    We nemen binnen 24 uur contact met je op voor jouw persoonlijke strategie sessie.
                    <br><br>
                    Check je email voor alle details en een exclusieve voorbereidingshandleiding.
                `;
            }
        }

        // Initialize
        updateProgress();
        console.log('🚀 FlowMaster Pro V4 Strict Flow Loaded!');
        console.log('🔒 Flow validation is ENFORCED - no skipping allowed!');
        console.log('📊 Assessment ready with', assessmentQuestions.length, 'questions');
    </script>
</body>
</html>
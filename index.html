<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlowMaster Pro V4 - Strict Flow</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        /* Volledige CSS-sectie blijft ongewijzigd */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        /* Rest van de CSS blijft hetzelfde */
    </style>
</head>
<body>
    <div class="container">
        <!-- Progress Bar -->
        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>
        <div class="progress-text" id="progressText">Stap 1 van 5</div>

        <!-- Step 1: Welcome -->
        <div class="card" id="step1">
            <h1 class="intro-title">FlowMaster Pro V4</h1>
            <p class="intro-subtitle">Advanced Recruitment Intelligence Platform</p>
            
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number">29</span>
                    <span class="stat-label">Expert Vragen</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">2.5K+</span>
                    <span class="stat-label">Bedrijven Getest</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number">7min</span>
                    <span class="stat-label">Complete Analyse</span>
                </div>
            </div>

            <button class="cta-button" onclick="nextStep()">Start Complete Assessment ğŸš€</button>
        </div>
<!-- Step 2: Company Info -->
        <div class="card hidden" id="step2">
            <h2 class="intro-title">Vertel Ons Over Je Organisatie</h2>
            <p class="intro-subtitle">Deze informatie helpt ons de perfecte analyse voor jou te bepalen</p>
            
            <div class="form-group">
                <label class="form-label">Bedrijfsnaam</label>
                <input type="text" class="form-input" id="companyName" placeholder="Jouw bedrijfsnaam" onkeyup="checkStep2()" required minlength="2" maxlength="100">
            </div>
            
            <div class="form-group">
                <label class="form-label">Contactpersoon</label>
                <input type="text" class="form-input" id="contactName" placeholder="Voor- en achternaam" onkeyup="checkStep2()" required minlength="2" maxlength="100">
            </div>
            
            <div class="form-group">
                <label class="form-label">Mobiele telefoon *</label>
                <input type="tel" class="form-input" id="mobilePhone" placeholder="+31 6 12345678" onkeyup="checkStep2()" required>
            </div>
            
            <div class="form-group">
                <label class="privacy-checkbox">
                    <input type="checkbox" id="privacyCheckbox" onchange="checkStep2()" required>
                    <span class="checkmark"></span>
                    Ik ga akkoord met de <a href="#" target="_blank">privacy voorwaarden</a> en het gebruik van mijn gegevens voor deze assessment.
                </label>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step2Next" disabled>Volgende</button>
            </div>
        </div>
<!-- Step 3: Company Size -->
        <div class="card hidden" id="step3">
            <h2 class="intro-title">Wat Is Jullie Bedrijfsgrootte?</h2>
            <p class="intro-subtitle">Dit helpt ons om gerichte aanbevelingen te doen</p>
            
            <div class="sector-grid">
                <div class="sector-card" onclick="selectSize('1-10', this)">
                    <div class="sector-icon">ğŸš€</div>
                    <div class="sector-title">Startup</div>
                    <div class="sector-description">1-10 medewerkers</div>
                </div>
                <div class="sector-card" onclick="selectSize('11-50', this)">
                    <div class="sector-icon">ğŸ“ˆ</div>
                    <div class="sector-title">Scale-up</div>
                    <div class="sector-description">11-50 medewerkers</div>
                </div>
                <div class="sector-card" onclick="selectSize('51-200', this)">
                    <div class="sector-icon">ğŸ¢</div>
                    <div class="sector-title">Middelgroot</div>
                    <div class="sector-description">51-200 medewerkers</div>
                </div>
                <div class="sector-card" onclick="selectSize('200+', this)">
                    <div class="sector-icon">ğŸ›ï¸</div>
                    <div class="sector-title">Enterprise</div>
                    <div class="sector-description">200+ medewerkers</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step3Next" disabled>Volgende Stap</button>
            </div>
        </div>
<!-- Step 4: Sector Selection -->
        <div class="card hidden" id="step4">
            <h2 class="intro-title">Kies Je Specifieke Sector</h2>
            <p class="intro-subtitle">Kies de specifieke industrie sector die het beste bij je organisatie past</p>
            
            <div class="sector-grid">
                <div class="sector-card" onclick="selectSector('Bouw & Constructie', this)">
                    <div class="sector-icon">ğŸ—ï¸</div>
                    <div class="sector-title">Bouw & Constructie</div>
                </div>
                <div class="sector-card" onclick="selectSector('Installatietechniek (W/E/Klimaat)', this)">
                    <div class="sector-icon">ğŸ”§</div>
                    <div class="sector-title">Installatietechniek</div>
                    <div class="sector-description">(W/E/Klimaat)</div>
                </div>
                <div class="sector-card" onclick="selectSector('Metaalbewerking & Industrie', this)">
                    <div class="sector-icon">âš™ï¸</div>
                    <div class="sector-title">Metaalbewerking & Industrie</div>
                </div>
                <div class="sector-card" onclick="selectSector('Machinebouw & Equipment', this)">
                    <div class="sector-icon">ğŸ­</div>
                    <div class="sector-title">Machinebouw & Equipment</div>
                </div>
                <div class="sector-card" onclick="selectSector('High-tech & Elektronica', this)">
                    <div class="sector-icon">ğŸ’»</div>
                    <div class="sector-title">High-tech & Elektronica</div>
                </div>
                <div class="sector-card" onclick="selectSector('Andere technische sector', this)">
                    <div class="sector-icon">âš¡</div>
                    <div class="sector-title">Andere technische sector</div>
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()">Vorige</button>
                <button class="nav-button primary" onclick="nextStep()" id="step4Next" disabled>Start 29-Vragen Assessment</button>
            </div>
        </div>
<!-- Step 5: Assessment Questions -->
        <div class="card hidden" id="step5">
            <div id="assessmentHeader">
                <h2 class="intro-title">Recruitment Maturity Assessment</h2>
                <p class="intro-subtitle">Vraag <span id="questionNumber">1</span> van 19</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="assessmentProgress" style="width: 6.67%"></div>
                </div>
            </div>
            
            <div id="questionContainer">
                <h3 id="questionText" style="font-size: 20px; margin-bottom: 30px; line-height: 1.4;"></h3>
                
                <div id="optionsContainer" class="assessment-options">
                    <!-- Options will be dynamically generated -->
                </div>
            </div>
            
            <div class="nav-buttons">
                <button class="nav-button" onclick="previousStep()" id="assessmentPrevious">Vorige</button>
                <button class="nav-button primary" onclick="nextAssessmentQuestion()" id="assessmentNext" disabled>Volgende Vraag</button>
            </div>
        </div>
<!-- Step 6: Success Page -->
        <div class="card hidden" id="step6">
            <div class="success-state">
                <div class="success-icon">ğŸ‰</div>
                <h2 class="success-title">Perfect! Je Complete Assessment is Voltooid</h2>
                <p class="success-message">
                    Bedankt <span id="finalName">Gebruiker</span>! Je assessment score van <strong>85%</strong> met sector expertise is opgeslagen. 
                    We nemen binnen 24 uur contact met je op voor jouw persoonlijke strategie sessie.
                    <br><br>
                    Check je email voor alle details en een exclusieve voorbereidingshandleiding.
                </p>
                
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; margin-top: 30px;">
                    <button class="download-button" onclick="downloadReport()">
                        ğŸ“„ Download Je Rapport
                    </button>
                    <button class="cta-button" onclick="restart()">
                        ğŸ”„ Start Nieuwe Assessment
                    </button>
                </div>
            </div>
        </div>
    </div>
<script>
        let currentStep = 1;
        let formData = {
            companyName: '',
            contactName: '',
            mobilePhone: '',
            companySize: '',
            sector: '',
            privacyAccepted: false,
            totalScore: 0,
            answers: {},
            currentQuestion: 1
        };

        // NIEUWE submitContact functie
        function submitContact() {
            const payload = {
                timestamp: new Date().toISOString(),
                flowMasterId: 'FM-' + Date.now(),
                name: document.getElementById('contact-name').value.trim(),
                email: document.getElementById('contact-email').value.trim(),
                phone: document.getElementById('contact-phone').value.trim(),
                company: document.getElementById('contact-company').value.trim(),
                answers: formData.answers || {},
                completionRate: Math.round((Object.keys(formData.answers || {}).length / 19) * 100)
            };

            console.log('ğŸš€ Verzenden naar Zapier:', payload);

            fetch('https://hooks.zapier.com/hooks/catch/23933997/uujpa1d/', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            })
            .then(response => {
                console.log('âœ… Webhook verzonden:', response.status);
                showSuccessScreen();
            })
            .catch(error => {
                console.error('âŒ Webhook error:', error);
                showSuccessScreen(); // Toch success screen tonen
            });
        }
// Original 19 Assessment Questions in Simple Dutch
        const assessmentQuestions = [
            {
                id: 1,
                question: "Hoe vaak evalueert jullie organisatie het recruitment proces?",
                options: [
                    { text: "Nooit", points: 0 },
                    { text: "Jaarlijks", points: 3 },
                    { text: "Per kwartaal", points: 7 },
                    { text: "Maandelijks", points: 10 }
                ]
            },
            // ... [rest van de assessment vragen blijft ongewijzigd]
            {
                id: 29,
                question: "Welke continuous improvement processen zijn er voor recruitment?",
                options: [
                    { text: "Geen improvement proces", points: 0 },
                    { text: "Jaarlijkse review", points: 3 },
                    { text: "Kwartaal optimalisaties", points: 7 },
                    { text: "Continuous optimization cycle", points: 10 }
                ]
            }
        ];
// STRICT FLOW CONTROL - NO SKIPPING ALLOWED
        function nextStep() {
            console.log('ğŸ”’ nextStep() called from step:', currentStep);
            console.trace('Call stack:'); // This will show us exactly what called nextStep()
            
            // Step 1 to 2: Always allowed
            if (currentStep === 1) {
                goToStep(2);
                return;
            }
            
            // Step 2 to 3: Check if company info is complete
            if (currentStep === 2) {
                if (!isStep2Complete()) {
                    alert('âš ï¸ Vul eerst je bedrijfsnaam en contactgegevens in!');
                    return;
                }
                goToStep(3);
                return;
            }
            
            // Step 3 to 4: Check if company size is selected
            if (currentStep === 3) {
                if (!formData.companySize) {
                    alert('âš ï¸ Selecteer eerst je bedrijfsgrootte!');
                    return;
                }
                goToStep(4);
                return;
            }
            
            // Step 4 to 5: Check if sector is selected
            if (currentStep === 4) {
                if (!formData.sector) {
                    alert('âš ï¸ Selecteer eerst je specifieke sector!');
                    return;
                }
                goToStep(5);
                return;
            }
            
            // Step 5 to 6: Complete assessment first
            if (currentStep === 5) {
                console.log('âš ï¸ Cannot skip assessment - complete all questions first');
                alert('âš ï¸ Voltooi eerst alle assessment vragen!');
                return;
            }
            
            console.error('âŒ Invalid step progression attempt');
        }

        function previousStep() {
            if (currentStep > 1) {
                goToStep(currentStep - 1);
            }
        }
function goToStep(step) {
            console.log('âœ… Going to step:', step);
            
            try {
                // Hide all steps
                document.querySelectorAll('.card').forEach(card => {
                    card.classList.add('hidden');
                });
                
                // Show target step
                const targetStep = document.getElementById('step' + step);
                if (targetStep) {
                    targetStep.classList.remove('hidden');
                    currentStep = step;
                    updateProgress();
                    
                    // Initialize assessment when going to step 5
                    if (step === 5) {
                        initializeAssessment();
                    }
                    
                    // Update final name if going to step 6
                    if (step === 6) {
                        const name = formData.contactName || 'Gebruiker';
                        const finalNameEl = document.getElementById('finalName');
                        if (finalNameEl) {
                            finalNameEl.textContent = name;
                        }
                        
                        // Hide progress bar on final step
                        const progressBar = document.getElementById('progressBar');
                        const progressText = document.getElementById('progressText');
                        if (progressBar) progressBar.style.display = 'none';
                        if (progressText) progressText.style.display = 'none';
                    } else {
                        // Show progress bar on other steps
                        const progressBar = document.getElementById('progressBar');
                        const progressText = document.getElementById('progressText');
                        if (progressBar) progressBar.style.display = 'block';
                        if (progressText) progressText.style.display = 'block';
                    }
                } else {
                    console.error('âŒ Step element not found:', 'step' + step);
                }
            } catch (error) {
                console.error('Error in goToStep:', error);
            }
        }

        function updateProgress() {
            try {
                const progress = ((currentStep - 1) / 5) * 100;
                const progressFill = document.getElementById('progressFill');
                const progressText = document.getElementById('progressText');
                
                if (progressFill) {
                    progressFill.style.width = Math.max(0, Math.min(100, progress)) + '%';
                }
                
                if (progressText) {
                    progressText.textContent = `Stap ${currentStep} van 6`;
                }
            } catch (error) {
                console.error('Error in updateProgress:', error);
            }
        }
function isStep2Complete() {
            const companyName = (document.getElementById('companyName').value || '').trim();
            const contactName = (document.getElementById('contactName').value || '').trim();
            const mobilePhone = (document.getElementById('mobilePhone').value || '').trim();
            const privacyAccepted = document.getElementById('privacyCheckbox').checked;
            
            return companyName.length >= 2 && 
                   contactName.length >= 2 && 
                   mobilePhone.length >= 8 && 
                   privacyAccepted;
        }

        function checkStep2() {
            try {
                const button = document.getElementById('step2Next');
                if (!button) return;
                
                if (isStep2Complete()) {
                    button.disabled = false;
                    formData.companyName = document.getElementById('companyName').value.trim();
                    formData.contactName = document.getElementById('contactName').value.trim();
                    formData.mobilePhone = document.getElementById('mobilePhone').value.trim();
                    formData.privacyAccepted = document.getElementById('privacyCheckbox').checked;
                    console.log('âœ… Step 2 validation passed');
                } else {
                    button.disabled = true;
                    console.log('âš ï¸ Step 2 validation failed');
                }
            } catch (error) {
                console.error('Error in checkStep2:', error);
            }
        }
function selectSize(size, element) {
            console.log('âœ… Selected size:', size);
            formData.companySize = size;
            
            try {
                // Update visual selection
                document.querySelectorAll('.sector-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                if (element) {
                    element.classList.add('selected');
                }
                
                // Enable next button
                const nextButton = document.getElementById('step3Next');
                if (nextButton) {
                    nextButton.disabled = false;
                    console.log('âœ… Step 3 validation passed');
                }
            } catch (error) {
                console.error('Error in selectSize:', error);
            }
        }

        function selectSector(sector, element) {
            console.log('âœ… Selected sector:', sector);
            formData.sector = sector;
            
            try {
                // Update visual selection - reset all sector cards
                document.querySelectorAll('.sector-card').forEach(card => {
                    card.classList.remove('selected');
                });
                
                if (element) {
                    element.classList.add('selected');
                }
                
                // Enable next button
                const nextButton = document.getElementById('step4Next');
                if (nextButton) {
                    nextButton.disabled = false;
                    console.log('âœ… Step 4 validation passed');
                }
            } catch (error) {
                console.error('Error in selectSector:', error);
            }
        }
function downloadReport() {
            try {
                const { jsPDF } = window.jspdf;
                const doc = new jsPDF();
                
                const companyName = formData.companyName || 'Test Bedrijf';
                const contactName = formData.contactName || 'Test Gebruiker';
                const mobilePhone = formData.mobilePhone || 'Niet opgegeven';
                const companySize = formData.companySize || 'Niet geselecteerd';
                
                // Header
                doc.setFontSize(20);
                doc.setTextColor(102, 126, 234);
                doc.text('FlowMaster Pro V4 Assessment Rapport', 20, 30);
                
                // Company info
                doc.setFontSize(14);
                doc.setTextColor(0, 0, 0);
                doc.text('Bedrijfsinformatie:', 20, 50);
                doc.setFontSize(12);
                doc.text(`Bedrijf: ${companyName}`, 20, 65);
                doc.text(`Contactpersoon: ${contactName}`, 20, 75);
                doc.text(`Telefoon: ${mobilePhone}`, 20, 85);
                doc.text(`Bedrijfsgrootte: ${companySize}`, 20, 95);
                
                // Score
                doc.setFontSize(16);
                doc.setTextColor(102, 126, 234);
                doc.text('Assessment Resultaat:', 20, 115);
                
                doc.setFontSize(24);
                doc.setTextColor(34, 197, 94);
                doc.text(`${formData.totalScore}%`, 20, 135);
                
                // Grade
                let gradeText = '';
                if (formData.totalScore >= 85) gradeText = 'A+ (Excellent)';
                else if (formData.totalScore >= 75) gradeText = 'A (Very Good)';
                else if (formData.totalScore >= 65) gradeText = 'B+ (Good)';
                else if (formData.totalScore >= 55) gradeText = 'B (Above Average)';
                else if (formData.totalScore >= 45) gradeText = 'C+ (Average)';
                else if (formData.totalScore >= 35) gradeText = 'C (Below Average)';
                else gradeText = 'D (Needs Improvement)';
                
                doc.setFontSize(14);
                doc.setTextColor(0, 0, 0);
                doc.text(`Grade: ${gradeText}`, 20, 150);
                
                // Assessment details
                doc.setFontSize(12);
                doc.text('Dit rapport bevat een analyse van uw recruitment maturity gebaseerd op 29 vragen', 20, 170);
                doc.text('over moderne recruitment praktijken, tools en processen.', 20, 180);
                
                // Contact info
                doc.setFontSize(10);
                doc.setTextColor(100, 100, 100);
                doc.text('Voor vragen over dit rapport, neem contact op via FlowMaster Pro.', 20, 250);
                doc.text(`Gegenereerd op: ${new Date().toLocaleDateString('nl-NL')}`, 20, 260);
                
                // Download the PDF
                doc.save(`FlowMaster-Assessment-${companyName.replace(/[^a-z0-9]/gi, '_')}.pdf`);
                
                console.log('âœ… PDF generated and downloaded successfully');
            } catch (error) {
                console.error('Error generating PDF:', error);
                // Fallback alert
                alert(`ğŸ“„ PDF Rapport Download!\n\nâœ… Assessment Voltooid!\n\nRapport details:\nâ€¢ Bedrijf: ${formData.companyName}\nâ€¢ Contact: ${formData.contactName}\nâ€¢ Telefoon: ${formData.mobilePhone}\nâ€¢ Score: ${formData.totalScore}%\nâ€¢ Grootte: ${formData.companySize}`);
            }
        }
function restart() {
            formData = {
                companyName: '',
                contactName: '',
                mobilePhone: '',
                companySize: '',
                privacyAccepted: false,
                totalScore: 0,
                answers: {},
                currentQuestion: 1
            };
            
            // Reset form fields
            const companyNameEl = document.getElementById('companyName');
            const contactNameEl = document.getElementById('contactName');
            const mobilePhoneEl = document.getElementById('mobilePhone');
            const privacyCheckboxEl = document.getElementById('privacyCheckbox');
            
            if (companyNameEl) companyNameEl.value = '';
            if (contactNameEl) contactNameEl.value = '';
            if (mobilePhoneEl) mobilePhoneEl.value = '';
            if (privacyCheckboxEl) privacyCheckboxEl.checked = false;
            
            // Reset buttons
            const step2NextEl = document.getElementById('step2Next');
            const step3NextEl = document.getElementById('step3Next');
            const assessmentNextEl = document.getElementById('assessmentNext');
            if (step2NextEl) step2NextEl.disabled = true;
            if (step3NextEl) step3NextEl.disabled = true;
            if (assessmentNextEl) {
                assessmentNextEl.disabled = true;
                assessmentNextEl.textContent = 'Volgende Vraag';
            }
            
            // Reset visual selections
            document.querySelectorAll('.sector-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('.assessment-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            goToStep(1);
        }
// Assessment Functions
        function initializeAssessment() {
            console.log('ğŸ¯ Initializing assessment');
            formData.currentQuestion = 1;
            formData.answers = {};
            formData.totalScore = 0;
            displayCurrentQuestion();
        }

        function displayCurrentQuestion() {
            const questionData = assessmentQuestions[formData.currentQuestion - 1];
            if (!questionData) return;

            // Update question number and progress
            const questionNumberEl = document.getElementById('questionNumber');
            const assessmentProgressEl = document.getElementById('assessmentProgress');
            const questionTextEl = document.getElementById('questionText');
            const optionsContainerEl = document.getElementById('optionsContainer');

            if (questionNumberEl) questionNumberEl.textContent = formData.currentQuestion;
            if (assessmentProgressEl) {
                const progress = (formData.currentQuestion / assessmentQuestions.length) * 100;
                assessmentProgressEl.style.width = progress + '%';
            }
            if (questionTextEl) questionTextEl.textContent = questionData.question;

            // Generate options
            if (optionsContainerEl) {
                optionsContainerEl.innerHTML = '';
                questionData.options.forEach((option, index) => {
                    const optionEl = document.createElement('div');
                    optionEl.className = 'assessment-option';
                    optionEl.onclick = () => selectAssessmentOption(formData.currentQuestion, option.points, optionEl);
                    
                    const optionTextEl = document.createElement('div');
                    optionTextEl.className = 'assessment-option-text';
                    optionTextEl.textContent = option.text;
                    
                    optionEl.appendChild(optionTextEl);
                    optionsContainerEl.appendChild(optionEl);
                });
            }

            // Update button state
            const nextButton = document.getElementById('assessmentNext');
            if (nextButton) {
                nextButton.disabled = true;
                if (formData.currentQuestion === assessmentQuestions.length) {
                    nextButton.textContent = 'Ga naar Resultaten';
                } else {
                    nextButton.textContent = 'Volgende Vraag';
                }
            }
        }
function selectAssessmentOption(questionId, points, selectedElement) {
            console.log('âœ… Selected option for question', questionId, 'worth', points, 'points');
            
            // Remove previous selection
            document.querySelectorAll('.assessment-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Mark current selection
            selectedElement.classList.add('selected');
            
            // Store answer
            formData.answers[questionId] = points;
            
            // Enable next button
            const nextButton = document.getElementById('assessmentNext');
            if (nextButton) {
                nextButton.disabled = false;
            }
        }

        function nextAssessmentQuestion() {
            if (!formData.answers[formData.currentQuestion]) {
                alert('âš ï¸ Selecteer eerst een antwoord!');
                return;
            }

            if (formData.currentQuestion === assessmentQuestions.length) {
                // Assessment complete - calculate score and go to results
                calculateFinalScore();
                goToStep(6);
            } else {
                // Next question
                formData.currentQuestion++;
                displayCurrentQuestion();
            }
        }
function calculateFinalScore() {
            let totalScore = 0;
            let maxPossibleScore = assessmentQuestions.length * 10; // Max 10 points per question
            
            Object.values(formData.answers).forEach(points => {
                totalScore += points;
            });
            
            // Calculate percentage
            formData.totalScore = Math.round((totalScore / maxPossibleScore) * 100);
            
            console.log('ğŸ¯ Assessment completed!');
            console.log('Total points:', totalScore, '/', maxPossibleScore);
            console.log('Final score:', formData.totalScore + '%');
            
            // Update the final score display
            updateFinalScoreDisplay();
        }

        function updateFinalScoreDisplay() {
            // Update the success message with the actual score
            const successMessage = document.querySelector('.success-message');
            if (successMessage) {
                const name = formData.contactName || 'Gebruiker';
                let gradeText = '';
                
                if (formData.totalScore >= 85) gradeText = 'A+ (Excellent)';
                else if (formData.totalScore >= 75) gradeText = 'A (Very Good)';
                else if (formData.totalScore >= 65) gradeText = 'B+ (Good)';
                else if (formData.totalScore >= 55) gradeText = 'B (Above Average)';
                else if (formData.totalScore >= 45) gradeText = 'C+ (Average)';
                else if (formData.totalScore >= 35) gradeText = 'C (Below Average)';
                else gradeText = 'D (Needs Improvement)';
                
                successMessage.innerHTML = `
                    Bedankt ${name}! Je assessment score van <strong>${formData.totalScore}% - ${gradeText}</strong> is opgeslagen. 
                    We nemen binnen 24 uur contact met je op voor jouw persoonlijke strategie sessie.
                    <br><br>
                    Check je email voor alle details en een exclusieve voorbereidingshandleiding.
                `;
            }
        }

        // Initialize
        updateProgress();
        console.log('ğŸš€ FlowMaster Pro V4 Strict Flow Loaded!');
        console.log('ğŸ”’ Flow validation is ENFORCED - no skipping allowed!');
        console.log('ğŸ“Š Assessment ready with', assessmentQuestions.length, 'questions');
    </script>
</body>
</html>
